{% extends 'base.html.twig' %}

{% block title %}{{ title_logo }}{% endblock title %}

{% block logo %}{{title_logo}}{% endblock logo %}

{% block Responsive_behaviors %}
<nav class="navbar navbar-expand-xl bg-dark" data-bs-theme="dark">
{% endblock Responsive_behaviors %}

{% block form %}

   {#Переменный для вывода данных в форме #}

{% if data_form_edit_part_numbers is iterable %}
  {% set part_number_find_id = data_form_edit_part_numbers.part_number|default('') %}
  {% set original_number_find_id = data_form_edit_part_numbers.original_number|default('') %}
  {% set manufacturer_find_id = data_form_edit_part_numbers.manufacturer|default('') %}
  {% set additional_descriptions_find_id = data_form_edit_part_numbers.additional_descriptions|default('') %}
  {% set part_name_find_id = data_form_edit_part_numbers.id_part_name|default('') %}
  {% set car_brand_find_id = data_form_edit_part_numbers.id_car_brand|default('') %}
  {% set side_find_id = data_form_edit_part_numbers.id_side|default('') %}
  {% set body_find_id = data_form_edit_part_numbers.id_body|default('') %}
  {% set axle_find_id = data_form_edit_part_numbers.id_axle|default('') %}
  {% set in_stock_find_id = data_form_edit_part_numbers.id_in_stock|default('') %}
  {% set id_find_id = data_form_edit_part_numbers.id|default('') %}
  {% set id_original_number_find_id = data_form_edit_part_numbers.id_original_number|default('') %}
{% else %}
  {% set part_number_find_id = data_form_edit_part_numbers.getPartNumber()|default('') %}
  {% set original_number_find_id = data_form_edit_part_numbers.getIdOriginalNumber().getOriginalNumber()|default('') %}
  {% set manufacturer_find_id = data_form_edit_part_numbers.getManufacturer()|default('') %}
  {% set additional_descriptions_find_id = data_form_edit_part_numbers.getAdditionalDescriptions()|default('') %}
  {% set part_name_find_id = data_form_edit_part_numbers.getIdPartName().getId()|default('') %}
  {% set car_brand_find_id = data_form_edit_part_numbers.getIdCarBrand().getId()|default('') %}
  {% set side_find_id = data_form_edit_part_numbers.getIdSide().getId()|default('') %}
  {% set body_find_id = data_form_edit_part_numbers.getIdBody().getId()|default('') %}
  {% set axle_find_id = data_form_edit_part_numbers.getIdAxle().getId()|default('') %}
  {% set in_stock_find_id = data_form_edit_part_numbers.getIdInStock().getId()|default('') %}
  {% set id_find_id = data_form_edit_part_numbers.getId()|default('') %}
  {% set id_original_number_find_id = data_form_edit_part_numbers.getIdOriginalNumber().getId()|default('') %}
{% endif %}

  {#Форма изменения номеров деталей#}

  {{ form_start(form_edit_part_numbers) }}
  <div class="container-fluid text-center mt-3">
    <div class="row">

      <div class="col-lg-12 col-xl-7 col-xxl-7">
        <div class="row">

          <div class="col-sm-12 col-md-6 col-lg-3">
            <div class="lb">{{ form_label(form_edit_part_numbers.part_number) }}</div>
            {{ form_widget(form_edit_part_numbers.part_number, { value : part_number_find_id, 'attr': {'class': 'w-100'} }) }}
            {{ form_errors(form_edit_part_numbers.part_number) |nl2br }}
            {% for message in app.flashes('[part_number_error][Regex]') %}
            {{ message }}
            {% endfor %}
          </div>

          <div class="col-sm-12 col-md-6 col-lg-3">
            <div class="lb">{{ form_label(form_edit_part_numbers.original_number) }}</div>
            {{ form_widget(form_edit_part_numbers.original_number, { value : original_number_find_id, 'attr': {'class': 'w-100'} }) }}
            {{ form_errors(form_edit_part_numbers.original_number) |nl2br }}
            {% for message in app.flashes('[original_number_error][Regex]') %}
            {{ message }}
            <br>
            Исправьте нарушения для продолжения работы
            {% endfor %}
          </div>

          <div class="col-sm-12 col-md-6 col-lg-3">
            <div class="lb">{{ form_label(form_edit_part_numbers.manufacturer) }}</div>
            {{ form_widget(form_edit_part_numbers.manufacturer, { value : manufacturer_find_id, 'attr': {'class': 'w-100'} }) }}
            {{ form_errors(form_edit_part_numbers.manufacturer) |nl2br }}
            {% for message in app.flashes('[manufacturer_error]') %}
            {{ message }}
            {% endfor %}
          </div>

          <div class="col-sm-12 col-md-6 col-lg-3">
            <div class="lb">{{ form_label(form_edit_part_numbers.additional_descriptions) }}</div>
            {{ form_widget(form_edit_part_numbers.additional_descriptions, 
            { value : additional_descriptions_find_id, 'attr': {'class': 'w-100'} }) }}
            {{ form_errors(form_edit_part_numbers.additional_descriptions) |nl2br }}
            {% for message in app.flashes('[additional_descriptions_error]') %}
            {{ message }}
            {% endfor %}
          </div>

        </div>
      </div>

      <div class="col-lg-12 col-xl-5 col-xxl-5">
        <div class="row justify-content-evenly">

          <div class="col-6">
            <div class="lb">{{ form_label(form_edit_part_numbers.id_part_name) }}</div>
            {{ form_widget(form_edit_part_numbers.id_part_name, { value : part_name_find_id, 'attr': {'class': 'w-100'} }) }}
            {{ form_errors(form_edit_part_numbers.id_part_name) |nl2br }}
          </div>

          <div class="col-3">
            <div class="lb">{{ form_label(form_edit_part_numbers.id_car_brand) }}</div>
            {{ form_widget(form_edit_part_numbers.id_car_brand, { value : car_brand_find_id, 'attr': {'class': 'w-100'} }) }}
            {{ form_errors(form_edit_part_numbers.id_car_brand) |nl2br }}
          </div>

          <div class="col-3">
            <div class="lb">{{ form_label(form_edit_part_numbers.id_side) }}</div>
            {{ form_widget(form_edit_part_numbers.id_side, { value : side_find_id, 'attr': {'class': 'w-100'} }) }}
            {{ form_errors(form_edit_part_numbers.id_side) |nl2br }}
          </div>
        </div>

        <div class="row justify-content-evenly">

          <div class="col-6">
            <div class="lb">{{ form_label(form_edit_part_numbers.id_body) }}</div>
            {{ form_widget(form_edit_part_numbers.id_body, { value : body_find_id, 'attr': {'class': 'w-100'} }) }}
            {{ form_errors(form_edit_part_numbers.id_body) |nl2br }}
          </div>

          <div class="col-3">
            <div class="lb">{{ form_label(form_edit_part_numbers.id_axle) }}</div>
            {{ form_widget(form_edit_part_numbers.id_axle, { value : axle_find_id, 'attr': {'class': 'w-100'} }) }}
            {{ form_errors(form_edit_part_numbers.id_axle) |nl2br }}
          </div>

          <div class="col-3">
            <div class="lb">{{ form_label(form_edit_part_numbers.id_in_stock) }}</div>
            {{ form_widget(form_edit_part_numbers.id_in_stock, { value : in_stock_find_id, 'attr': {'class': 'w-100'} }) }}
            {{ form_errors(form_edit_part_numbers.id_in_stock) |nl2br }}
          </div>

        </div>

      </div>
    </div>
    {{ form_widget(form_edit_part_numbers.id, {value : id_find_id}) }}
    {{ form_widget(form_edit_part_numbers.id_original_number, {value : id_original_number_find_id}) }}

    <div class="row mt-3">
      <div class="col-12 d-grid gap-2">
        {{ form_widget(form_edit_part_numbers.button_part_number, { 'label': 'Изменить', 'attr': {'class': 'btn
        btn-secondary'}}) }}
      </div>
    </div>

  </div>

  {{ form_end(form_edit_part_numbers) }}

   <div class="col-auto m-3">
    {% for message in app.flashes('Error') %}
    <h5 class="mt-3 ms-3">{{ message }}</h5>
    {% endfor %}
    
    {% if id %}
    <h5>Данные деталей изменены</h5>
    {% endif %}
  </div>
  {% endblock form %}